import React, { createContext, useContext, useState } from 'react';
const AuthContext = /*#__PURE__*/createContext(undefined);
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
export const AuthProvider = ({
  children
}) => {
  // Mock user for demo purposes - skip login
  const [user, setUser] = useState({
    id: 1,
    name: 'Demo Admin',
    email: 'admin@example.com',
    role: 'Admin',
    created_at: new Date().toISOString()
  });
  const [token, setToken] = useState('demo-token');
  const [isLoading, setIsLoading] = useState(false);
  const API_BASE = 'http://localhost:5000'; // Adjust to your Flask API URL

  const fetchUser = async () => {
    try {
      const response = await fetch(`${API_BASE}/auth/me`, {
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        }
      });
      if (response.ok) {
        const userData = await response.json();
        setUser(userData);
      } else {
        localStorage.removeItem('token');
        setToken(null);
      }
    } catch (error) {
      console.error('Failed to fetch user:', error);
      localStorage.removeItem('token');
      setToken(null);
    } finally {
      setIsLoading(false);
    }
  };
  const login = async (email, password) => {
    try {
      const response = await fetch(`${API_BASE}/auth/login`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          email,
          password
        })
      });
      if (response.ok) {
        const data = await response.json();
        const newToken = data.access_token;
        localStorage.setItem('token', newToken);
        setToken(newToken);
        return true;
      } else {
        return false;
      }
    } catch (error) {
      console.error('Login failed:', error);
      return false;
    }
  };
  const switchRole = role => {
    setUser(prev => prev ? {
      ...prev,
      role,
      name: `Demo ${role}`
    } : null);
  };
  const logout = () => {
    localStorage.removeItem('token');
    setToken(null);
    setUser(null);
  };
  const value = {
    user,
    token,
    login,
    logout,
    switchRole,
    isLoading
  };
  return /*#__PURE__*/React.createElement(AuthContext.Provider, {
    value: value
  }, children);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJBdXRoQ29udGV4dCIsInVuZGVmaW5lZCIsInVzZUF1dGgiLCJjb250ZXh0IiwiRXJyb3IiLCJBdXRoUHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJzZXRVc2VyIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJyb2xlIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRva2VuIiwic2V0VG9rZW4iLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJBUElfQkFTRSIsImZldGNoVXNlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJ1c2VyRGF0YSIsImpzb24iLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiZXJyb3IiLCJjb25zb2xlIiwibG9naW4iLCJwYXNzd29yZCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsIm5ld1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwic2V0SXRlbSIsInN3aXRjaFJvbGUiLCJwcmV2IiwibG9nb3V0IiwidmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICByb2xlOiAnQWRtaW4nIHwgJ1Byb2N1cmVtZW50JyB8ICdGaW5hbmNlJyB8ICdFbXBsb3llZSc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEF1dGhDb250ZXh0VHlwZSB7XG4gIHVzZXI6IFVzZXIgfCBudWxsO1xuICB0b2tlbjogc3RyaW5nIHwgbnVsbDtcbiAgbG9naW46IChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBsb2dvdXQ6ICgpID0+IHZvaWQ7XG4gIHN3aXRjaFJvbGU6IChyb2xlOiAnQWRtaW4nIHwgJ1Byb2N1cmVtZW50JyB8ICdGaW5hbmNlJyB8ICdFbXBsb3llZScpID0+IHZvaWQ7XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbn1cblxuY29uc3QgQXV0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0PEF1dGhDb250ZXh0VHlwZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlQXV0aCBtdXN0IGJlIHVzZWQgd2l0aGluIGFuIEF1dGhQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcblxuaW50ZXJmYWNlIEF1dGhQcm92aWRlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8QXV0aFByb3ZpZGVyUHJvcHM+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICAvLyBNb2NrIHVzZXIgZm9yIGRlbW8gcHVycG9zZXMgLSBza2lwIGxvZ2luXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPih7XG4gICAgaWQ6IDEsXG4gICAgbmFtZTogJ0RlbW8gQWRtaW4nLFxuICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgIHJvbGU6ICdBZG1pbicsXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH0pO1xuICBjb25zdCBbdG9rZW4sIHNldFRva2VuXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KCdkZW1vLXRva2VuJyk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgQVBJX0JBU0UgPSAnaHR0cDovL2xvY2FsaG9zdDo1MDAwJzsgLy8gQWRqdXN0IHRvIHlvdXIgRmxhc2sgQVBJIFVSTFxuXG4gIGNvbnN0IGZldGNoVXNlciA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vYXV0aC9tZWAsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHNldFVzZXIodXNlckRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICAgIHNldFRva2VuKG51bGwpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdXNlcjonLCBlcnJvcik7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgIHNldFRva2VuKG51bGwpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBsb2dpbiA9IGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9L2F1dGgvbG9naW5gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbWFpbCwgcGFzc3dvcmQgfSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Rva2VuID0gZGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIG5ld1Rva2VuKTtcbiAgICAgICAgc2V0VG9rZW4obmV3VG9rZW4pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTG9naW4gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3dpdGNoUm9sZSA9IChyb2xlOiAnQWRtaW4nIHwgJ1Byb2N1cmVtZW50JyB8ICdGaW5hbmNlJyB8ICdFbXBsb3llZScpID0+IHtcbiAgICBzZXRVc2VyKHByZXYgPT4gcHJldiA/IHsgLi4ucHJldiwgcm9sZSwgbmFtZTogYERlbW8gJHtyb2xlfWAgfSA6IG51bGwpO1xuICB9O1xuXG4gIGNvbnN0IGxvZ291dCA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICBzZXRUb2tlbihudWxsKTtcbiAgICBzZXRVc2VyKG51bGwpO1xuICB9O1xuXG4gIGNvbnN0IHZhbHVlID0ge1xuICAgIHVzZXIsXG4gICAgdG9rZW4sXG4gICAgbG9naW4sXG4gICAgbG9nb3V0LFxuICAgIHN3aXRjaFJvbGUsXG4gICAgaXNMb2FkaW5nLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9BdXRoQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxLQUFLLElBQUlDLGFBQWEsRUFBRUMsVUFBVSxFQUFFQyxRQUFRLFFBQThCLE9BQU87QUFtQnhGLE1BQU1DLFdBQVcsZ0JBQUdILGFBQWEsQ0FBOEJJLFNBQVMsQ0FBQztBQUV6RSxPQUFPLE1BQU1DLE9BQU8sR0FBR0EsQ0FBQSxLQUFNO0VBQzNCLE1BQU1DLE9BQU8sR0FBR0wsVUFBVSxDQUFDRSxXQUFXLENBQUM7RUFDdkMsSUFBSUcsT0FBTyxLQUFLRixTQUFTLEVBQUU7SUFDekIsTUFBTSxJQUFJRyxLQUFLLENBQUMsNkNBQTZDLENBQUM7RUFDaEU7RUFDQSxPQUFPRCxPQUFPO0FBQ2hCLENBQUM7QUFNRCxPQUFPLE1BQU1FLFlBQXlDLEdBQUdBLENBQUM7RUFBRUM7QUFBUyxDQUFDLEtBQUs7RUFDekU7RUFDQSxNQUFNLENBQUNDLElBQUksRUFBRUMsT0FBTyxDQUFDLEdBQUdULFFBQVEsQ0FBYztJQUM1Q1UsRUFBRSxFQUFFLENBQUM7SUFDTEMsSUFBSSxFQUFFLFlBQVk7SUFDbEJDLEtBQUssRUFBRSxtQkFBbUI7SUFDMUJDLElBQUksRUFBRSxPQUFPO0lBQ2JDLFVBQVUsRUFBRSxJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUM7RUFDckMsQ0FBQyxDQUFDO0VBQ0YsTUFBTSxDQUFDQyxLQUFLLEVBQUVDLFFBQVEsQ0FBQyxHQUFHbEIsUUFBUSxDQUFnQixZQUFZLENBQUM7RUFDL0QsTUFB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